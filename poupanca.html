<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta name="description" content="Calculadora de Gorjetas e Poupan√ßa">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script> -->
    <title>Document</title>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <style>
        @import url('css/poupe.css');
        
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .chart-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .chart-box h3 {
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }
        
        canvas {
            max-width: 100%;
            height: auto !important;
        }
    </style>
</head>
<body>
    <main>
        <header>
            <h1>Bem Vindo √† Poupan√ßa</h1>
        </header>
        <section class="info">
            <article>
                Poupan√ßa √© a parte do rendimento que n√£o √© gasta imediatamente, mas reservada para uso futuro. Pode ser guardada em contas banc√°rias, investimentos ou at√© mesmo em casa. A poupan√ßa √© importante para garantir seguran√ßa financeira, enfrentar emerg√™ncias e alcan√ßar objetivos de longo prazo, como a compra de uma casa ou a aposentadoria.
            </article>
            <br><br>
            <div>
                <h2>Dicas para Economizar Dinheiro</h2>
                <ul>
                    <li>Crie um or√ßamento mensal para controlar seus gastos.</li>
                    <li>Evite compras impulsivas e planeje suas compras.</li>
                    <li>Procure por descontos e ofertas antes de comprar.</li>
                    <li>Estabele√ßa metas de poupan√ßa claras e realistas.</li>
                    <li>Considere automatizar suas economias com transfer√™ncias autom√°ticas para uma conta poupan√ßa.</li>
                </ul>
            </div>
        </section>
        <br>
        <section class="app">
            <h2>Calculadora da Poupan√ßa</h2>
            <br>
            <div class="poupe">
                <label for="poupeAmount">Valor da Conta</label>
                <div class="input-wrapper">
                    <span class="currency">AOA</span>
                    <input type="number" id="poupeAmount" placeholder="0.00" step="0.01" min="0">
                </div>
            </div>
            <div class="input-group">
                <label>Selecione Qual Porcentagem quer poupar</label>
                <div class="tip-buttons">
                    <button class="tip-btn" data-tip="5">5%</button>
                    <button class="tip-btn" data-tip="10">10%</button>
                    <button class="tip-btn active" data-tip="15">15%</button>
                    <button class="tip-btn" data-tip="20">20%</button>
                    <button class="tip-btn" data-tip="25">25%</button>
                </div>
            </div>
            <div class="input-group">
                <label for="customTip">Poupan√ßa Personalizada (%)</label>
                <input type="number" id="customTip" placeholder="Ex: 18" min="0" max="100">
            </div>

            <div class="results">
                <div class="result-row">
                    <span class="result-label">Poupan√ßa Total</span>
                    <span class="result-value" id="tipAmount">0.00 AOA</span>
                </div>
                <div class="result-row">
                    <span class="result-label">Dinheiro poupado por M√™s</span>
                    <span class="result-value" id="tipPerPerson">0.00 AOA</span>
                </div>
                <div class="result-row total">
                    <span class="result-label">Total Por Ano</span>
                    <span class="result-value" id="totalAmount">0.00 AOA</span>
                </div>
                <div class="result-row">
                    <span class="result-label">Total por M√™s</span>
                    <span class="result-value" id="totalPerPerson">0.00 AOA</span>
                </div>
            </div>

            <button class="result-btn" type="button">Calcular Resultado</button>
            <br><br>
            <button class="reset-btn" id="resetBtn">Limpar</button>
        </section>
        <section class="charts-section">
            <h2 style="text-align: center; color: #667eea; margin-bottom: 20px;">üìä Visualiza√ß√£o de Poupan√ßa</h2>
            
            <div class="charts-container">
                <!-- Gr√°fico de Pizza -->
                <div class="chart-box">
                    <h3>Distribui√ß√£o Mensal</h3>
                    <canvas id="pieChart"></canvas>
                </div>

                <!-- Gr√°fico de Barras -->
                <div class="chart-box">
                    <h3>Crescimento Anual</h3>
                    <canvas id="barChart"></canvas>
                </div>

                <!-- Gr√°fico de Linha -->
                <div class="chart-box">
                    <h3>Proje√ß√£o 5 Anos</h3>
                    <canvas id="lineChart"></canvas>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <nav><a href="index.html"><button class="button-tip">Calculadora de Gorjetas</button></a></nav>
    </footer>
   <!-- <script src="js/poupe.js"></script> -->
    <!--<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
    <script>
       let selectedTip = 15;
       // Vari√°veis para os gr√°ficos
        let pieChart, barChart, lineChart;

        const tipBtns = document.querySelectorAll('.tip-btn');
        const customTipInput = document.getElementById('customTip');
        const poupeAmountInput = document.getElementById('poupeAmount');
        const resultBtn = document.querySelector('.result-btn');
        const resetBtn = document.getElementById('resetBtn');

        // Inicializar gr√°ficos
        function initCharts() {
            // Gr√°fico de Pizza - Distribui√ß√£o Mensal
            const pieCtx = document.getElementById('pieChart').getContext('2d');
            pieChart = new Chart(pieCtx, {
                type: 'pie',
                data: {
                    labels: ['Poupan√ßa', 'Gastos'],
                    datasets: [{
                        data: [0, 100],
                        backgroundColor: [
                            '#667eea',
                            '#e0e0e0'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Gr√°fico de Barras - Crescimento Anual
            const barCtx = document.getElementById('barChart').getContext('2d');
            barChart = new Chart(barCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                    datasets: [{
                        label: 'Poupan√ßa Acumulada (AOA)',
                        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        backgroundColor: '#667eea',
                        borderColor: '#5568d3',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Gr√°fico de Linha - Proje√ß√£o
            const lineCtx = document.getElementById('lineChart').getContext('2d');
            lineChart = new Chart(lineCtx, {
                type: 'line',
                data: {
                    labels: ['Ano 1', 'Ano 2', 'Ano 3', 'Ano 4', 'Ano 5'],
                    datasets: [{
                        label: 'Poupan√ßa Total (AOA)',
                        data: [0, 0, 0, 0, 0],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Atualizar gr√°ficos com novos dados
        function updateCharts(savingsAmount, totalAmount, yearlyTotal) {
            // Atualizar Gr√°fico de Pizza
            pieChart.data.datasets[0].data = [savingsAmount, totalAmount];
            pieChart.update();

            // Atualizar Gr√°fico de Barras (acumulado mensal)
            const monthlyData = [];
            for (let i = 1; i <= 12; i++) {
                monthlyData.push(savingsAmount * i);
            }
            barChart.data.datasets[0].data = monthlyData;
            barChart.update();

            // Atualizar Gr√°fico de Linha (proje√ß√£o 5 anos)
            const yearlyData = [];
            for (let i = 1; i <= 5; i++) {
                yearlyData.push(yearlyTotal * i);
            }
            lineChart.data.datasets[0].data = yearlyData;
            lineChart.update();
        }

        tipBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                tipBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                selectedTip = parseFloat(this.dataset.tip);
                customTipInput.value = '';
            });
        });

        customTipInput.addEventListener('input', function() {
            if (this.value) {
                tipBtns.forEach(b => b.classList.remove('active'));
                selectedTip = parseFloat(this.value) || 0;
            }
        });

        resultBtn.addEventListener('click', calculateSavings);

        function calculateSavings() {
            const amount = parseFloat(poupeAmountInput.value) || 0;
            
            if (amount <= 0) {
                alert('Por favor, insira um valor v√°lido!');
                return;
            }

            const savingsPercentage = selectedTip;
            const savingsAmount = (amount * savingsPercentage) / 100;
            const monthlySavings = savingsAmount;
            const yearlyTotal = savingsAmount * 12;
            const monthlyTotal = amount - savingsAmount;

            document.getElementById('tipAmount').textContent = savingsAmount.toFixed(2) + ' AOA';
            document.getElementById('tipPerPerson').textContent = monthlySavings.toFixed(2) + ' AOA';
            document.getElementById('totalAmount').textContent = yearlyTotal.toFixed(2) + ' AOA';
            document.getElementById('totalPerPerson').textContent = monthlyTotal.toFixed(2) + ' AOA';

            // Atualizar gr√°ficos
            updateCharts(savingsAmount, monthlyTotal, yearlyTotal);
        }

        resetBtn.addEventListener('click', function() {
            poupeAmountInput.value = '';
            customTipInput.value = '';
            selectedTip = 15;
            
            tipBtns.forEach(b => b.classList.remove('active'));
            tipBtns[2].classList.add('active');
            
            document.getElementById('tipAmount').textContent = '0.00 AOA';
            document.getElementById('tipPerPerson').textContent = '0.00 AOA';
            document.getElementById('totalAmount').textContent = '0.00 AOA';
            document.getElementById('totalPerPerson').textContent = '0.00 AOA';

            // Reset dos gr√°ficos
            updateCharts(0, 100, 0);
        });

        poupeAmountInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateSavings();
            }
        });

        customTipInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateSavings();
            }
        });

        // Inicializar gr√°ficos quando a p√°gina carregar
        window.addEventListener('load', initCharts);
    </script>
</body>
</html>